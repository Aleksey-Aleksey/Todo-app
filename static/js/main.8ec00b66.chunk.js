(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},16:function(e,t,c){},18:function(e,t,c){"use strict";c.r(t);var n,o=c(1),r=c.n(o),s=c(9),l=(c(14),c(15),c(16),c(3)),a=c(7),i=c(2),u=c(4),d=c.n(u);!function(e){e.ALL="All",e.ACTIVE="Active",e.COMPLETED="Completed"}(n||(n={}));var j=c(0),f=r.a.createContext({todos:[],setTodos:function(){},isToggleAllStatus:!1,setIsToggleAllStatus:function(){},filterStatus:n.ALL,setFilterStatus:function(){},filterTodos:function(){return[]}}),b=function(e){var t=e.children,c=function(e,t){var c=Object(o.useState)((function(){var c=localStorage.getItem(e);if(!c)return t;try{return JSON.parse(c)}catch(n){return localStorage.removeItem(e),t}})),n=Object(i.a)(c,2),r=n[0],s=n[1];return[r,function(t){localStorage.setItem(e,JSON.stringify(t)),s(t)}]}("todos",[]),r=Object(i.a)(c,2),s=r[0],l=r[1],a=Object(o.useState)(!1),u=Object(i.a)(a,2),d=u[0],b=u[1],O=Object(o.useState)(n.ALL),m=Object(i.a)(O,2),h=m[0],p=m[1],g=function(){switch(h){case n.ACTIVE:return s.filter((function(e){return!e.completed}));case n.COMPLETED:return s.filter((function(e){return e.completed}));default:return s}},x=Object(o.useMemo)((function(){return{todos:s,setTodos:l,isToggleAllStatus:d,setIsToggleAllStatus:b,filterStatus:h,setFilterStatus:p,filterTodos:g}}),[s,h,g,l,d]);return Object(j.jsx)(f.Provider,{value:x,children:t})},O=function(e){var t=e.todo,c=Object(o.useContext)(f),n=c.todos,r=c.setTodos,s=c.setIsToggleAllStatus,u=Object(o.useState)(!1),b=Object(i.a)(u,2),O=b[0],m=b[1],h=t.completed,p=t.id,g=t.title,x=Object(o.useState)(g),v=Object(i.a)(x,2),C=v[0],T=v[1],S=Object(o.useRef)(null);Object(o.useEffect)((function(){S.current&&S.current.focus()}),[O]);var A=function(e){var t=n.filter((function(t){return t!==e}));r(Object(a.a)(t))},y=function(){m(!1),C.trim()?(r(n.map((function(e){return e!==t?e:Object(l.a)(Object(l.a)({},t),{},{title:C.trim()})}))),T(C.trim())):A(t)};return Object(j.jsxs)("li",{className:d()({completed:h,editing:O}),onDoubleClick:function(){return m(!0)},children:[Object(j.jsxs)("div",{className:"view",children:[Object(j.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-view",checked:h,onChange:function(){return function(e){var t=n.map((function(t){return t.id===e?Object(l.a)(Object(l.a)({},t),{},{completed:!t.completed}):t}));r(t),s(t.every((function(e){return e.completed})))}(p)}}),Object(j.jsx)("label",{onDoubleClick:function(){return m(!0)},children:g}),Object(j.jsx)("button",{"aria-label":"toggle-view",type:"button",className:"destroy","data-cy":"deleteTodo",onClick:function(){return A(t)}})]}),Object(j.jsx)("input",{type:"text",className:"edit",ref:S,onKeyUp:function(e){switch(e.key){case"Escape":T(g),m(!1);break;case"Enter":y()}},value:C,onChange:function(e){return T(e.target.value)},onBlur:y})]})},m=function(){var e=Object(o.useContext)(f),t=e.todos,c=e.setTodos,n=e.isToggleAllStatus,r=e.setIsToggleAllStatus,s=(0,e.filterTodos)();return Object(j.jsx)(j.Fragment,{children:t.length>0&&Object(j.jsxs)("section",{className:"main",children:[Object(j.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",onChange:function(){c(t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{completed:!n})}))),r(!n)}}),Object(j.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(j.jsx)("ul",{className:"todo-list","data-cy":"todosList",children:s.map((function(e){return Object(j.jsx)(O,{todo:e},e.id)}))})]})})},h=function(){var e=Object(o.useContext)(f),t=e.todos,c=e.setTodos,r=e.setIsToggleAllStatus,s=e.filterStatus,l=e.setFilterStatus,a=t.filter((function(e){return!e.completed})).length;return Object(j.jsx)(j.Fragment,{children:t.length>0&&Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:1===a?"1 item left":"".concat(a," items left")}),Object(j.jsxs)("ul",{className:"filters","data-cy":"todosFilter",children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"#/",className:d()({selected:n.ALL===s}),onClick:function(){return l(n.ALL)},children:"All"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"#/active",className:d()({selected:n.ACTIVE===s}),onClick:function(){return l(n.ACTIVE)},children:"Active"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"#/completed",className:d()({selected:n.COMPLETED===s}),onClick:function(){return l(n.COMPLETED)},children:"Completed"})})]}),a!==t.length&&Object(j.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){c(t.filter((function(e){return!e.completed}))),r(!1)},children:"Clear completed"})]})})},p=function(){var e=Object(o.useContext)(f),t=e.todos,c=e.setTodos,n=Object(o.useState)(""),r=Object(i.a)(n,2),s=r[0],l=r[1],u=Object(o.useRef)(null);Object(o.useEffect)((function(){u.current&&u.current.focus()}),[]);return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("h1",{children:"todos"}),Object(j.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),s.trim()){var n={id:+new Date,title:s,completed:!1};c([].concat(Object(a.a)(t),[n])),l("")}},children:Object(j.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",ref:u,value:s,onChange:function(e){l(e.target.value)}})})]})},g=function(){return Object(j.jsx)(b,{children:Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)(p,{}),Object(j.jsx)(m,{}),Object(j.jsx)(h,{})]})})},x=document.getElementById("root");Object(s.render)(Object(j.jsx)(g,{}),x)}},[[18,1,2]]]);
//# sourceMappingURL=main.8ec00b66.chunk.js.map